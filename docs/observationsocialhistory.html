<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>JP.JPFHIR.EXPERIMENTS\Observationsocialhistory - FHIR v4.0.1</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link rel="stylesheet" href="fhir.css"/>

      <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="assets/css/bootstrap-fhir.css"/>

      <!-- Project extras -->
    <link rel="stylesheet" href="assets/css/project.css"/>
    <link rel="stylesheet" href="assets/css/pygments-manni.css"/>
    <link rel="stylesheet" href="assets/css/jquery-ui.css"/>
  	<link rel="stylesheet" href="assets/css/prism.css"/>
      <!-- Placeholder for child template CSS declarations -->

    <script src="fhir-table-scripts.js" type="text/javascript"> </script>

      <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
      <!-- [if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif] -->

      <!-- Favicons -->
    <link sizes="144x144" rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-144-precomposed.png"/>
    <link sizes="114x114" rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-114-precomposed.png"/>
    <link sizes="72x72" rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-72-precomposed.png"/>
    <link rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-57-precomposed.png"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>

    <style type="text/css">h2{--heading-prefix:"36"}
    h3,h4,h5,h6{--heading-prefix:"36"}</style>
    <div id="segment-header" class="segment">    <!-- segment-header -->
      <div class="container">    <!-- container -->
          <!-- Placeholder for child template header declarations -->


        <div id="ig-status">
          <p><span style="font-size:12pt;font-weight:bold">FHIR JP Core CI/CD実験</span>
            <br/>
            <span style="display:inline-block;">1.0.0 - ci-build


            </span>
          </p>
        </div>
      </div>   <!-- /container -->
    </div>    <!-- /segment-header -->

    <div id="segment-navbar" class="segment">    <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">    <!-- container -->
          <!-- HEADER CONTENT -->

        <nav class="navbar navbar-inverse">
            <!-- status-bar -->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" data-toggle="collapse" type="button" class="navbar-toggle">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a href="http://hl7.org/fhir/R4/index.html" class="navbar-brand hidden">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
                <!-- menu.xml -->

<ul class="nav navbar-nav">
  <li>
    <a href="index.html">Home</a>
  </li>
  <li>
    <a href="artifacts.html">Artifacts</a>
  </li>
</ul>
            </div>    <!-- /.nav-collapse -->
          </div>    <!-- /.container -->
        </nav>    <!-- /.navbar -->
        <!-- /HEADER CONTENT -->
      </div>    <!-- /container -->
    </div>    <!-- /segment-navbar -->
      <!-- status-bar -->

    <div id="segment-breadcrumb" class="segment">    <!-- segment-breadcrumb -->
      <div class="container">    <!-- container -->
        <ul class="breadcrumb">
          <li><a href="toc.html"><b>Table of Contents</b></a></li><li><b>Observationsocialhistory</b></li>

        </ul>
      </div>    <!-- /container -->
    </div>    <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">    <!-- segment-content -->
      <div class="container">    <!-- container -->
        <div class="row">
          <div class="inner-wrapper">

<style type="text/css">
h2:before{color:silver;counter-increment:section;content:var(--heading-prefix) " ";}
h3:before{color:silver;counter-increment:sub-section;content:var(--heading-prefix) "." counter(sub-section) " ";}
h4:before{color:silver;counter-increment:composite;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) " ";}
h5:before{color:silver;counter-increment:detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) " ";}
h6:before{color:silver;counter-increment:more-detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) "." counter(more-detail)" ";}
</style>
<div class="col-12">
    <!-- ReleaseHeader --><p id="publish-box">FHIR JP Core CI/CD実験 - Local Development build (v1.0.0). See the <a href="http://jpfhir.jp/core/experiments/history.html">Directory of published versions</a></p>  <!-- EndReleaseHeader -->
  <h2>Observationsocialhistory</h2>
  












    <p>  <!-- white space is critical inside of capture --></p>
<div class="markdown-toc">
<ul id="markdown-toc">
  <li><a href="#21315-observation-生活背景情報用プロファイル" id="markdown-toc-21315-observation-生活背景情報用プロファイル">2.1.3.1.5. Observation 生活背景情報用プロファイル</a>    <ul>
      <li><a href="#213151-概要" id="markdown-toc-213151-概要">2.1.3.1.5.1. 概要</a></li>
      <li><a href="#213152-背景および想定シナリオ" id="markdown-toc-213152-背景および想定シナリオ">2.1.3.1.5.2. 背景および想定シナリオ</a>        <ul>
          <li><a href="#2131521-スコープ" id="markdown-toc-2131521-スコープ">2.1.3.1.5.2.1. スコープ</a></li>
        </ul>
      </li>
      <li><a href="#213153-関連するプロファイル" id="markdown-toc-213153-関連するプロファイル">2.1.3.1.5.3. 関連するプロファイル</a></li>
      <li><a href="#213154-リソース定義" id="markdown-toc-213154-リソース定義">2.1.3.1.5.4. リソース定義</a>        <ul>
          <li><a href="#2131541-必須要素" id="markdown-toc-2131541-必須要素">2.1.3.1.5.4.1. 必須要素</a></li>
          <li><a href="#2131542-extension定義" id="markdown-toc-2131542-extension定義">2.1.3.1.5.4.2. Extension定義</a></li>
          <li><a href="#2131543-用語定義" id="markdown-toc-2131543-用語定義">2.1.3.1.5.4.3. 用語定義</a></li>
          <li><a href="#2131544-制約一覧" id="markdown-toc-2131544-制約一覧">2.1.3.1.5.4.4. 制約一覧</a></li>
        </ul>
      </li>
      <li><a href="#213155-利用方法" id="markdown-toc-213155-利用方法">2.1.3.1.5.5. 利用方法</a>        <ul>
          <li><a href="#2131551-インタラクション一覧" id="markdown-toc-2131551-インタラクション一覧">2.1.3.1.5.5.1. インタラクション一覧</a></li>
          <li><a href="#2131552-operationおよびsearch-parameter-一覧" id="markdown-toc-2131552-operationおよびsearch-parameter-一覧">2.1.3.1.5.5.2. OperationおよびSearch Parameter 一覧</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

</div>
<h1 id="21315-observation-生活背景情報用プロファイル">2.1.3.1.5. Observation 生活背景情報用プロファイル</h1>

<h2 id="213151-概要">2.1.3.1.5.1. 概要</h2>
<p>| 項目           | 内容                                                       |
| ————– | ———————————————————- |
| 定義URL        | http://jpfhir.jp/fhir/core/StructureDefinition/JP_Observation_SocialHistory |
| バージョン     | 1.0.0                                                      |
| 名前           | JP_Observation_SocialHistory                                   |
| タイトル       | JP Core Observation Social History Profile |
| ステータス     | アクティブ（2021-11-03）                                   |
| 定義           | Observation Social History Profile |
| 公開者         | FHIR&reg; Japanese implementation research working group in Japan Association of Medical Informatics (JAMI) |
| Copyright      | FHIR&reg; Japanese implementation research working group in Japan Association of Medical Informatics (JAMI)  |
| ソースリソース | https://simplifier.net/jp-core-draftv1/jpobservationsocialhistory |</p>

<p>本プロファイル説明は、患者に付属する一項目分のバイタルサイン情報について、情報の登録や検索、取得のために、<code class="language-plaintext highlighter-rouge">JP_Observation_SocialHistory</code>リソースを使用するにあたっての、最低限の制約を記述したものである。
<code class="language-plaintext highlighter-rouge">JP_Observation_SocialHistory</code> リソースに対して本プロファイルに準拠する場合に必須となる要素や、サポートすべき拡張、用語、検索パラメータを定義する。</p>

<h2 id="213152-背景および想定シナリオ">2.1.3.1.5.2. 背景および想定シナリオ</h2>

<p>本プロファイルは、以下のようなユースケースを想定している。</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">Patient</code>リソースから指定された日時、期間での患者生活背景情報の参照</li>
  <li><code class="language-plaintext highlighter-rouge">Patient</code>リソースから指定された患者生活背景情報項目に対する、指定された期間での患者生活背景情報の参照</li>
  <li>指定された期間や患者生活背景情報項目に対し、条件に合致する患者生活背景情報、または関連する他のリソース（<code class="language-plaintext highlighter-rouge">Observation</code>リソースや、<code class="language-plaintext highlighter-rouge">Patient</code>リソース等）の参照。</li>
</ul>

<h3 id="2131521-スコープ">2.1.3.1.5.2.1. スコープ</h3>

<p><code class="language-plaintext highlighter-rouge">Observtion</code>はヘルスケアの中心的な要素であり、診断の支援、進捗状況の監視、ベースラインやパターンの決定、さらには人口統計学的特性の把握に使用されます。ほとんどの<code class="language-plaintext highlighter-rouge">Observation</code>は、いくつかのメタデータを持つ単純な名前/値のペアのアサーションであるが、いくつかの <code class="language-plaintext highlighter-rouge">Observation</code>は、他の<code class="language-plaintext highlighter-rouge">Observation</code>を論理的にグループ化したり、あるいはマルチコンポーネントの<code class="language-plaintext highlighter-rouge">Observation</code>であったりする。</p>

<p>このプロファイルでは上記想定シナリオにて用いられる<code class="language-plaintext highlighter-rouge">Observation</code>の用途がスコープであり、患者基本情報の中でも特に患者バイタルサインに該当する情報項目の１つを取り扱う際に、必要な要件を定義している。</p>

<h2 id="213153-関連するプロファイル">2.1.3.1.5.3. 関連するプロファイル</h2>
<p>このプロファイルは、以下のリソースに対して定義された各プロファイルから直接参照される可能性がある。</p>

<ul>
  <li><a href="https://www.hl7.org/fhir/adverseevent.html"><code class="language-plaintext highlighter-rouge">AdverseEvent</code></a></li>
  <li><a href="https://www.hl7.org/fhir/appointment.html"><code class="language-plaintext highlighter-rouge">Appointment</code></a></li>
  <li><a href="https://www.hl7.org/fhir/careplan.html"><code class="language-plaintext highlighter-rouge">CarePlan</code></a></li>
  <li><a href="https://www.hl7.org/fhir/chargeitem.html"><code class="language-plaintext highlighter-rouge">ChargeItem</code></a></li>
  <li><a href="https://www.hl7.org/fhir/clinicalimpression.html"><code class="language-plaintext highlighter-rouge">ClinicalImpression</code></a></li>
  <li><a href="https://www.hl7.org/fhir/communication.html"><code class="language-plaintext highlighter-rouge">Communication</code></a></li>
  <li><a href="https://www.hl7.org/fhir/communicationrequest.html"><code class="language-plaintext highlighter-rouge">CommunicationRequest</code></a></li>
  <li><a name="l410">​</a><a href="Condition"><code class="language-plaintext highlighter-rouge">Condition</code></a></li>
  <li><a href="https://www.hl7.org/fhir/contract.html"><code class="language-plaintext highlighter-rouge">Contract</code></a></li>
  <li><a href="https://www.hl7.org/fhir/devicerequest.html"><code class="language-plaintext highlighter-rouge">DeviceRequest</code></a></li>
  <li><a href="https://www.hl7.org/fhir/deviceusestatement.html"><code class="language-plaintext highlighter-rouge">DeviceUseStatement</code></a></li>
  <li><a name="l430">​</a><a href="/DiagnosticReport"><code class="language-plaintext highlighter-rouge">DiagnosticReport</code></a></li>
  <li><a name="l435">​</a><a href="Encounter"><code class="language-plaintext highlighter-rouge">Encounter</code></a></li>
  <li><a href="https://www.hl7.org/fhir/familymemberhistory.html"><code class="language-plaintext highlighter-rouge">FamilyMemberHistory</code></a></li>
  <li><a href="https://www.hl7.org/fhir/goal.html"><code class="language-plaintext highlighter-rouge">Goal</code></a></li>
  <li><a href="https://www.hl7.org/fhir/guidanceresponse.html"><code class="language-plaintext highlighter-rouge">GuidanceResponse</code></a></li>
  <li><a name="l455">​</a><a href="ImagingStudy2"><code class="language-plaintext highlighter-rouge">ImagingStudy</code></a></li>
  <li><a href="https://www.hl7.org/fhir/immunization.html"><code class="language-plaintext highlighter-rouge">Immunization</code></a></li>
  <li><a href="https://www.hl7.org/fhir/medicationadministration.html"><code class="language-plaintext highlighter-rouge">MedicationAdministration</code></a></li>
  <li><a href="https://www.hl7.org/fhir/MedicationRequest.html"><code class="language-plaintext highlighter-rouge">MedicationRequest</code></a></li>
  <li><a href="https://www.hl7.org/fhir/medicationstatement.html"><code class="language-plaintext highlighter-rouge">MedicationStatement</code></a></li>
  <li><a href="https://www.hl7.org/fhir/molecularsequence.html"><code class="language-plaintext highlighter-rouge">MolecularSequence</code></a></li>
  <li><a name="l485">​</a><a href="ObservationSocialHistory"><code class="language-plaintext highlighter-rouge">Observation</code></a></li>
  <li><a name="l490">​</a><a href="Procedure"><code class="language-plaintext highlighter-rouge">Procedure</code></a></li>
  <li><a href="https://www.hl7.org/fhir/questionnaireresponse.html"><code class="language-plaintext highlighter-rouge">QuestionnaireResponse</code></a></li>
  <li><a href="https://www.hl7.org/fhir/requestgroup.html"><code class="language-plaintext highlighter-rouge">RequestGroup</code></a></li>
  <li><a href="https://www.hl7.org/fhir/riskassessment.html"><code class="language-plaintext highlighter-rouge">RiskAssessment</code></a></li>
  <li><a href="https://www.hl7.org/fhir/servicerequest.html"><code class="language-plaintext highlighter-rouge">ServiceRequest</code></a></li>
  <li><a href="https://www.hl7.org/fhir/supplyrequest.html"><code class="language-plaintext highlighter-rouge">SupplyRequest</code></a></li>
</ul>

<h2 id="213154-リソース定義">2.1.3.1.5.4. リソース定義</h2>
<ul>
  <li><a href="https://simplifier.net/jp-core-draftv1/jpobservationsocialhistory">リソース定義ページの参照</a></li>
  <li><a href="https://simplifier.net/jp-core-draftv1/jpobservationsocialhistory/$download?format=json">リソース定義のダウンロード</a></li>
</ul>

<h3 id="2131541-必須要素">2.1.3.1.5.4.1. 必須要素</h3>

<p>次のデータ項目は必須（データが存在しなければならない）、あるいは、データが送信システムに存在する場合はサポートされなければならないことを意味する（Must Support）。</p>

<h4 id="21315411-必須">2.1.3.1.5.4.1.1. 必須</h4>
<p>本プロファイルでは、次の要素を持たなければならない。</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">status</code>︓生活背景情報項目の状態は必須である。</li>
  <li><code class="language-plaintext highlighter-rouge">category</code>︓このリソースが示す生活背景情報項目を分類するための区分であり、このプロファイルでは必須とする。</li>
  <li><code class="language-plaintext highlighter-rouge">code</code>︓このリソースは何の生活背景情報項目であるかを示すため必須である。</li>
  <li><code class="language-plaintext highlighter-rouge">subject</code>︓このリソースが示す生活背景情報項目が、どの患者のものかを示すため、このプロファイルでは参照する<code class="language-plaintext highlighter-rouge">patient</code>リソースの定義を必須とする。</li>
</ul>

<h4 id="21315412-must-support">2.1.3.1.5.4.1.2. Must Support</h4>
<p>このプロファイルでは MustSupport要素定義は行っていない。</p>

<h3 id="2131542-extension定義">2.1.3.1.5.4.2. Extension定義</h3>
<p>このプロファイルでは拡張定義は行っていない。</p>

<h3 id="2131543-用語定義">2.1.3.1.5.4.3. 用語定義</h3>

<table>
  <thead>
    <tr>
      <th>Path</th>
      <th>定義</th>
      <th>バインディング強度</th>
      <th>バリューセット</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">JP_Observation_SocialHistory.category</code></td>
      <td>基底仕様のカテゴリ「social-history」固定とする</td>
      <td>Preferred</td>
      <td><a href="https://hl7.org/fhir/valueset-observation-category.html"><code class="language-plaintext highlighter-rouge">ObservationCategoryCodes</code></a></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">JP_Observation_SocialHistory.code</code></td>
      <td>MEDIS-DCによるJ-MIX（電子保存された診療録情報の交換のためのデータ項目セット）第6章を元に定義する</td>
      <td>Preferred</td>
      <td><code class="language-plaintext highlighter-rouge">SocialHistoryCode</code></td>
    </tr>
  </tbody>
</table>

<h3 id="2131544-制約一覧">2.1.3.1.5.4.4. 制約一覧</h3>

<p>このプロファイルでは制約定義は行っていない。</p>

<h2 id="213155-利用方法">2.1.3.1.5.5. 利用方法</h2>

<h3 id="2131551-インタラクション一覧">2.1.3.1.5.5.1. インタラクション一覧</h3>

<table>
  <thead>
    <tr>
      <th>コンフォーマンス</th>
      <th>インタラクション</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>SHALL（必須）</td>
      <td>search-type、read</td>
    </tr>
    <tr>
      <td>SHOULD（推奨）</td>
      <td>vread、history-instance</td>
    </tr>
    <tr>
      <td>MAY（利用可能）</td>
      <td>create、update、patch、delete、history-type</td>
    </tr>
  </tbody>
</table>

<h3 id="2131552-operationおよびsearch-parameter-一覧">2.1.3.1.5.5.2. OperationおよびSearch Parameter 一覧</h3>

<h4 id="21315521-search-parameter一覧">2.1.3.1.5.5.2.1. Search Parameter一覧</h4>

<table>
  <thead>
    <tr>
      <th>コンフォーマンス</th>
      <th>パラメータ</th>
      <th>型</th>
      <th>例</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>SHOULD</td>
      <td><code class="language-plaintext highlighter-rouge">subject</code>,<code class="language-plaintext highlighter-rouge">category</code>,<code class="language-plaintext highlighter-rouge">code</code>,<code class="language-plaintext highlighter-rouge">value-quantity</code></td>
      <td><code class="language-plaintext highlighter-rouge">reference</code>,<code class="language-plaintext highlighter-rouge">token</code>,<code class="language-plaintext highlighter-rouge">token</code>,<code class="language-plaintext highlighter-rouge">quantity</code></td>
      <td><code class="language-plaintext highlighter-rouge">GET [base]/Observation?subject=Patient/123&amp;category=vital-signs&amp;code=http://loinc.org|8867-4&amp;value-quantity=gt40</code></td>
    </tr>
    <tr>
      <td>SHOULD</td>
      <td><code class="language-plaintext highlighter-rouge">subject</code>,<code class="language-plaintext highlighter-rouge">category</code>,<code class="language-plaintext highlighter-rouge">code</code>,<code class="language-plaintext highlighter-rouge">value-quantity</code>,<code class="language-plaintext highlighter-rouge">date</code></td>
      <td><code class="language-plaintext highlighter-rouge">reference</code>,<code class="language-plaintext highlighter-rouge">token</code>,<code class="language-plaintext highlighter-rouge">token</code>,<code class="language-plaintext highlighter-rouge">quantity</code>,<code class="language-plaintext highlighter-rouge">date</code></td>
      <td><code class="language-plaintext highlighter-rouge">GET [base]/Observation?subject=Patient/123&amp;category=vital-signs&amp;code=http://loinc.org|8867-4&amp;value-quantity=gt40&amp;date=le2020-12-31</code></td>
    </tr>
    <tr>
      <td>SHOULD</td>
      <td><code class="language-plaintext highlighter-rouge">subject</code>,<code class="language-plaintext highlighter-rouge">category</code>,<code class="language-plaintext highlighter-rouge">code</code>,<code class="language-plaintext highlighter-rouge">value-quantity</code>,<code class="language-plaintext highlighter-rouge">encounter</code></td>
      <td><code class="language-plaintext highlighter-rouge">reference</code>,<code class="language-plaintext highlighter-rouge">token</code>,<code class="language-plaintext highlighter-rouge">token</code>,<code class="language-plaintext highlighter-rouge">quantity</code>,<code class="language-plaintext highlighter-rouge">encounter</code></td>
      <td><code class="language-plaintext highlighter-rouge">GET [base]/Observation?subject=Patient/123&amp;category=vital-signs&amp;code=http://loinc.org|8867-4&amp;value-quantity=gt40&amp;encounter=Encounter/456</code></td>
    </tr>
  </tbody>
</table>

<h4 id="21315522-操作詳細">2.1.3.1.5.5.2.2. 操作詳細</h4>

<h5 id="213155221-必須検索パラメータ">2.1.3.1.5.5.2.2.1. 必須検索パラメータ</h5>

<p>次の検索パラメータは必須でサポートされなければならない。（SHALL）</p>

<p>（<code class="language-plaintext highlighter-rouge">Observation</code>リソースでは検索の多様性が求められるため、必須としての検索項目は定義していない。）</p>

<h5 id="213155222-推奨検索パラメータ">2.1.3.1.5.5.2.2.2. 推奨検索パラメータ</h5>

<p>次の検索パラメータをサポートすることが望ましい。（SHOULD）</p>

<p>1.患者中心での検索：<code class="language-plaintext highlighter-rouge">subjet</code>（= <code class="language-plaintext highlighter-rouge">Patient</code>リソース：対象患者）、<code class="language-plaintext highlighter-rouge">category</code>（対象カテゴリ）、<code class="language-plaintext highlighter-rouge">code</code>（対象項目）、<code class="language-plaintext highlighter-rouge">value[x].valueQuantity</code>（値条件）での検索をサポートすることが望ましい。（MAY）
検査結果値であるエレメント=<code class="language-plaintext highlighter-rouge">value[x].valueQuantity</code>の実際のSearch Parameterは<code class="language-plaintext highlighter-rouge">value-quantity</code>となる。</p>

<p><code class="language-plaintext highlighter-rouge">subject</code>,<code class="language-plaintext highlighter-rouge">category</code>,<code class="language-plaintext highlighter-rouge">code</code>,<code class="language-plaintext highlighter-rouge">value-quantity</code> の各検索パラメータに一致する<code class="language-plaintext highlighter-rouge">Observation</code>リソースを含むBundleを取得することができる。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET [base]/Observation?subject={reference}&amp;category={token}&amp;code={token}&amp;value-quantity={quantity}
</code></pre></div></div>

<p>例：</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET [base]/Observation?subject=Patient/123&amp;category=vital-signs&amp;code=http://loinc.org|8867-4&amp;value-quantity=gt40
</code></pre></div></div>

<p>2.項目中心の検索：<code class="language-plaintext highlighter-rouge">subject</code>（= 複数のPatientリソース：母集団としての患者範囲）、<code class="language-plaintext highlighter-rouge">category</code>（対象カテゴリ）、<code class="language-plaintext highlighter-rouge">code</code>（対象項目）、<code class="language-plaintext highlighter-rouge">value[x].valueQuantity</code>（値条件）、<code class="language-plaintext highlighter-rouge">effective[x].effectiveDateTime</code> または .<code class="language-plaintext highlighter-rouge">effectivePeriod</code>（期間範囲）での検索をサポートすることが望ましい。（MAY）</p>

<p>検査結果値であるエレメント=<code class="language-plaintext highlighter-rouge">value[x].valueQuantity</code>の実際のSearch Parameterは<code class="language-plaintext highlighter-rouge">value-quantity</code>となり、期間指定についてはエレメントが<code class="language-plaintext highlighter-rouge">effective[x].effectiveDateTime</code> または <code class="language-plaintext highlighter-rouge">.effectivePeriod</code> いずれの場合においてもSearch Parameterは <code class="language-plaintext highlighter-rouge">date</code>となる。</p>

<p><code class="language-plaintext highlighter-rouge">subject</code>,<code class="language-plaintext highlighter-rouge">category</code>,<code class="language-plaintext highlighter-rouge">code</code>,<code class="language-plaintext highlighter-rouge">value-quantity</code>,<code class="language-plaintext highlighter-rouge">date</code> の各検索パラメータに一致する<code class="language-plaintext highlighter-rouge">Observation</code>リソースを含むBundleを検索する。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET [base]/Observation?subject={reference}&amp;category={token}&amp;code={token}&amp;value-quantity={quantity}&amp;date={date}
</code></pre></div></div>

<p>例：</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET [base]/Observation?subject=Patient/123&amp;category=vital-signs&amp;code=http://loinc.org|8867-4&amp;value-quantity=gt40&amp;date=le2020-12-31
</code></pre></div></div>

<p>3.訪問診療等の検索：<code class="language-plaintext highlighter-rouge">subjet</code>（= 複数のPatientリソース：母集団としての患者範囲）、<code class="language-plaintext highlighter-rouge">category</code>（対象カテゴリ）、<code class="language-plaintext highlighter-rouge">code</code>（対象項目）、<code class="language-plaintext highlighter-rouge">value[x].valueQuantity</code>（値条件）、<code class="language-plaintext highlighter-rouge">encounter</code>（= <code class="language-plaintext highlighter-rouge">Encounter</code>リソース：対象医療行為）での検索をサポートすることが望ましい。（MAY）</p>

<p><code class="language-plaintext highlighter-rouge">subject</code>,<code class="language-plaintext highlighter-rouge">category</code>,<code class="language-plaintext highlighter-rouge">code</code>,<code class="language-plaintext highlighter-rouge">value-quantity</code>,<code class="language-plaintext highlighter-rouge">date</code>,<code class="language-plaintext highlighter-rouge">encounter</code> の各検索パラメータに一致する<code class="language-plaintext highlighter-rouge">Observation</code>リソースを含むBundleを検索する。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET [base]/Observation?subject={reference}&amp;category={token}&amp;code={token}&amp;value-quantity={quantity}&amp;date={date}&amp;&amp;encounter={encounter}
</code></pre></div></div>

<p>例：</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET [base]/Observation?subject=Patient/123&amp;category=vital-signs&amp;code=http://loinc.org|8867-4&amp;value-quantity=gt40&amp;date=le2020-12-31&amp;encounter=Encounter/456
</code></pre></div></div>

<h5 id="213155223-オプション検索パラメータ">2.1.3.1.5.5.2.2.3. オプション検索パラメータ</h5>

  <!-- オプションとして次の検索パラメータをサポートすることができる。(MAY) -->
<p>オプション検索パラメータ(MAY)はありません。</p>

<h4 id="21315523-operation一覧">2.1.3.1.5.5.2.3. Operation一覧</h4>

<table>
  <thead>
    <tr>
      <th>コンフォーマンス</th>
      <th>オペレーション</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>MAY</td>
      <td><code class="language-plaintext highlighter-rouge">$lastn</code></td>
      <td><code class="language-plaintext highlighter-rouge">$lastn</code>オペレーションを使用すると、指定したある条件を満たす、最新のn件の<code class="language-plaintext highlighter-rouge">Observation</code>リソースを取得することができる。</td>
    </tr>
  </tbody>
</table>

<h5 id="213155231-オプションオペレーション">2.1.3.1.5.5.2.3.1. オプションオペレーション</h5>

<p>オプションとして次のオペレーションをサポートすることができる。(MAY)</p>

<ol>
  <li><code class="language-plaintext highlighter-rouge">Observation</code>用 <code class="language-plaintext highlighter-rouge">$lastn</code> オペレーション</li>
</ol>

<p><code class="language-plaintext highlighter-rouge">$lastn</code>オペレーションはある条件に基づく最新、または最新からn件の検査結果/測定結果等を取得するという一般的なニーズを満たすためのオペレーションである。例えば、直近の傾向を見るために、患者の過去5回分の体温を取得したり、最新の検査結果や媒体るサインを取得したりすることができる。 検索を行う際は、通常の<code class="language-plaintext highlighter-rouge">Observation</code>の検索パラメータと組み合わせて使用される。また、対象となる患者等を限定するための、<code class="language-plaintext highlighter-rouge">patient</code>または<code class="language-plaintext highlighter-rouge">subject</code>の検索パラメータ、およびカテゴリを指定する<code class="language-plaintext highlighter-rouge">category</code>検索パラメータは必須の検索パラメータとなる。</p>

<p>また取得される結果には以下のルールに従う。</p>
<ul>
  <li>追加パラメータによりフィルタされる</li>
  <li>取得される結果は<code class="language-plaintext highlighter-rouge">Observation.code</code>の値によるグルーピング処理(Group by)される</li>
  <li>新しいデータから古いデータの順にソートされる</li>
  <li>グループごとにmaxパラメータに指定された数だけ応答が返る。maxが指定されない場合は、最新の結果のみが返される。</li>
</ul>

<p>この操作の公式なURLは以下である</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://hl7.org/fhir/OperationDefinition/Observation-lastn
</code></pre></div></div>

<h6 id="2131552311-入力パラメータ">2.1.3.1.5.5.2.3.1.1. 入力パラメータ</h6>

<table>
  <thead>
    <tr>
      <th>名前</th>
      <th>多重度</th>
      <th>型</th>
      <th>バインディング</th>
      <th>プロファイル</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>max</td>
      <td>0..1</td>
      <td>positiveInt</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>max は、<code class="language-plaintext highlighter-rouge">lastn</code> クエリ操作のオプションの入力パラメータです。これは、各グループから返す<code class="language-plaintext highlighter-rouge">Observation</code>の最大数を指定するために使用される。例えば、「ある患者のすべてのバイタルサイン結果から最新の3件を取得する」というクエリの場合、max = 3となる。</td>
    </tr>
  </tbody>
</table>

<h6 id="2131552312-出力パラメータ">2.1.3.1.5.5.2.3.1.2. 出力パラメータ</h6>

<table>
  <thead>
    <tr>
      <th>名前</th>
      <th>多重度</th>
      <th>型</th>
      <th>バインディング</th>
      <th>プロファイル</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>return</td>
      <td>1..1</td>
      <td>Bundle</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>バンドルのタイプは”searchset”である。この操作の結果は、リソースとして直接返される。</td>
    </tr>
  </tbody>
</table>

<h4 id="21315524-サンプル">2.1.3.1.5.5.2.4. サンプル</h4>

<p>リクエスト：ある患者のすべてのバイタルから最新の3件を取得する。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET [base]/Observation/$lastn?max=3&amp;patient=Patient/123&amp;category=vital-signs
</code></pre></div></div>

<p>レスポンス：各サーバ毎に実装されたLast Nアルゴリズムに従い、患者のすべてのバイタルの中からコードごとに分類し、それぞれについて最新の3件を返す。以下の応答例では、9種のバイタルに対してそれぞれ3件ずつ応答を返しているため、合計27件の<code class="language-plaintext highlighter-rouge">Observation</code>のバンドルとなっている。</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">
</span><span class="err">HTTP/</span><span class="mf">1.1</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="err">OK</span><span class="w">
</span><span class="p">[</span><span class="err">other</span><span class="w"> </span><span class="err">headers</span><span class="p">]</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="nl">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bundle"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"26419249-18b3-45de-b10e-dca0b2e72b"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"lastUpdated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-18T03:28:49Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"searchset"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">27</span><span class="p">,</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">patient</span><span class="w"> </span><span class="err">temperature</span><span class="w"> </span><span class="err">was</span><span class="w"> </span><span class="err">being</span><span class="w"> </span><span class="err">taken</span><span class="w"> </span><span class="err">several</span><span class="w"> </span><span class="err">times</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">day</span><span class="w">
  </span><span class="nl">"entry"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="nl">"fullUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://server/path/Observation/20170219-06temp"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Observation"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20170219temp"</span><span class="p">,</span><span class="w">
      </span><span class="err">..</span><span class="w"> </span><span class="err">snip</span><span class="w"> </span><span class="err">...</span><span class="w">
  </span><span class="p">,{</span><span class="w">
   </span><span class="nl">"fullUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://server/path/Observation/20170219-05temp"</span><span class="p">,</span><span class="w">
       </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Observation"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20170218temp"</span><span class="p">,</span><span class="w">
      </span><span class="err">..</span><span class="w"> </span><span class="err">snip</span><span class="w"> </span><span class="err">...</span><span class="w">
    </span><span class="p">}</span><span class="w">
      </span><span class="err">..</span><span class="w"> </span><span class="err">snip</span><span class="w"> </span><span class="err">...</span><span class="w">
  </span><span class="err">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>




</div>
        </div>    <!-- /inner-wrapper -->
      </div>    <!-- /row -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-content -->

  <script src="assets/js/jquery.js" type="text/javascript"> </script>       <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script src="assets/js/jquery-ui.min.js" type="text/javascript"> </script>

  <script type="text/javascript">
    $(document).ready(function(){
      if(window.location.hash != "") {
          $('a[href="' + window.location.hash + '"]').click()
      }
    });
  </script>
  <a name="bottom"> </a>
  <div igtool="footer" id="segment-footer" class="segment">    <!-- segment-footer -->
    <div class="container">    <!-- container -->

      <div class="inner-wrapper">
        <p>
          IG &copy; 2022+ <a style="color:var(--footer-hyperlink-text-color)" href="https://jpfhir.jp/">HL7 FHIR 日本実装検討WG</a>.  Package jp.jpfhir.experiments#1.0.0 based on <a style="color: var(--footer-hyperlink-text-color)" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generated <span title="Fri, Apr 1, 2022 16:21+0900">2022-04-01</span>
          <br/>
          <span style="color: var(--footer-highlight-text-color)"></span>
                      Links: <a style="color: var(--footer-hyperlink-text-color)" href="toc.html">Table of Contents</a> |
                 <a style="color: var(--footer-hyperlink-text-color)" href="qa.html">QA Report</a>
                 
                
          
        </p>
      </div>    <!-- /inner-wrapper -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">    <!-- segment-post-footer -->
    <div class="container">    <!-- container -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-post-footer -->
  
    <!-- JS and analytics only. -->
    <!-- Bootstrap core JavaScript
  ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
  <script src="assets/js/bootstrap.min.js" type="text/javascript"> </script>
  <script src="assets/js/respond.min.js" type="text/javascript"> </script>
  <script src="assets/js/anchor.min.js" type="text/javascript"> </script>
  <script src="assets/js/clipboard.min.js" type="text/javascript"> </script>
  <script src="assets/js/clipboard-btn.js" type="text/javascript"> </script>
  <script>anchors.options.visible = 'hover'
anchors.add()</script>
  
  <!-- feedback form - Google forms -->
  <!-- v0.1, 2021-01-09 -->



  <!-- / feedback form -->

    <!-- Analytics Below
  ================================================== -->
  </body>
</html>